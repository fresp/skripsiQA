<ul class="breadcrumb">
    <li><a (click)="goToCategory()">Category Management</a></li>
    <li class="active">Edit Category</li>
</ul>
<mat-card class="marg20">
    <form (ngSubmit)="onSubmit(form)" #form="ngForm" enctype="multipart/form-data">
        <mat-card-header>
            <mat-card-title>Edit Category</mat-card-title>
        </mat-card-header>
        <mat-divider></mat-divider>
        <mat-card-content>

            <div class="row">
                <div class="col-sm-2 col-xs-12 text-right">
                    <strong>Parent Category <span class="symbol-required">*</span> : </strong>
                </div>
                <div class="col-sm-5 col-xs-12">
                    <mat-form-field>
                        <mat-label>Parent Category</mat-label>
                        <select matNativeControl name="category" ngModel="{{dataCategory.parent_id}}" #category="ngModel">
                            <ng-container *ngIf="!dataCategory.parent_id; else elseTemplate">
                                <option value="">-- Parent Category --</option>                                    
                            </ng-container>
                            <ng-template #elseTemplate>
                                <option *ngIf="categories == null" value="">Loading...</option>
                                <option value="">-- Parent Category --</option>
                                <option *ngFor="let categorys of categories" value="{{categorys._id}}">{{categorys.name}}</option>
                            </ng-template>
                        </select>
                    </mat-form-field>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-2 col-xs-12 text-right">
                    <strong>Name <span class="symbol-required">*</span> : </strong>
                </div>
                <div class="col-sm-5 col-xs-12">
                    <mat-form-field appearance="outline">
                        <mat-label>Name</mat-label>
                        <input matInput name="name" ngModel="{{dataCategory.name}}" #name="ngModel" required>
                    </mat-form-field>
                    <div class="error-red" *ngIf="name.invalid && (name.touched || name.dirty)">
                        <div *ngIf="name.errors.required">
                            This field is required !
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-2 col-xs-12 text-right">
                    <strong>Description <span class="symbol-required">*</span> : </strong>
                </div>
                <div class="col-sm-5 col-xs-12">
                    <mat-form-field appearance="outline">
                        <mat-label>Description</mat-label>
                        <textarea matInput name="desc" ngModel="{{dataCategory.desc}}" #desc="ngModel" required>{{dataCategory.desc}}</textarea>
                    </mat-form-field>
                    <div class="error-red" *ngIf="desc.invalid && (desc.touched || desc.dirty)">
                        <div *ngIf="desc.errors.required">
                            This field is required !
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-2 col-xs-12 text-right">
                    Image :
                </div>
                <div class="col-sm-5 col-xs-12 marg-bottom-20">
                    <img src="{{dataCategory.img}}" class="img-thumbnail marg-bottom-10" width="220" height="220">
                    <input type="file" (change)="onSelectedImage($event)" placeholder="Image" name="image" ngModel #image="ngModel">
                </div>
            </div>
            <div class="row">
                <div class="col-sm-2 col-xs-12 text-right">
                    <strong>Publish <span class="symbol-required">*</span> : </strong>
                </div>
                <div class="col-sm-5 col-xs-12">
                    <mat-form-field>
                        <mat-label>Publish</mat-label>
                        <select matNativeControl name="publish" ngModel="{{dataCategory.publish}}" #publish="ngModel"
                            required>
                            <option value="true">Publish</option>
                            <option value="false">Not Publish</option>
                        </select>
                    </mat-form-field>
                    <div class="error-red" *ngIf="publish.invalid && (publish.touched || publish.dirty)">
                        <div *ngIf="publish.errors.required">
                            This field is required !
                        </div>
                    </div>
                </div>
            </div>

        </mat-card-content>
        <mat-divider></mat-divider>
        <mat-card-actions>
            <div class="row">
                <div class="col-sm-3 col-xs-2 pad0">
                    <a class="delete-on-edit" color="warn">Delete</a>
                </div>
                <div class="col-sm-9 col-xs-10 pad0 text-right">
                    <button mat-raised-button (click)="goToCategory()">Cancel</button>
                    <button mat-raised-button color="primary" type="submit">Create</button>
                </div>
            </div>
        </mat-card-actions>
    </form>
</mat-card>